(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{ydVm:function(t,e,i){"use strict";i.r(e),i.d(e,"BookingModule",function(){return et});var c=i("ofXK"),n=i("Rb0e"),o=i("3Pt+"),s=i("u3tn"),r=i("tk/3"),b=i("CS83"),a=i("fXoL"),l=i("McNs");let h=(()=>{class t extends b.a{constructor(t,e){super("Booking"),this.http=t,this.authService=e}setHeader(){this.authService.onTokenChange().subscribe(t=>{this.header=(new r.d).set("Authorization","Bearer "+t.getValue())})}get ListBooking(){return this.setHeader(),this.http.get(this.Root_URL,{headers:this.header})}SelectBooking(t){return this.setHeader(),this.http.get(this.Root_URL+t,{headers:this.header})}NewBooking(t){return this.setHeader(),t.voucherCode=t.voucherCode.trim().toUpperCase(),this.http.post(this.Root_URL+"create",t,{headers:this.header,responseType:"text"})}EditBooking(t){return this.setHeader(),t.voucherCode=t.voucherCode.trim().toUpperCase(),this.http.post(this.Root_URL+"edit",t,{headers:this.header,responseType:"text"})}DeleteBooking(t){return this.setHeader(),this.http.delete(this.Root_URL+t,{headers:this.header,responseType:"text"})}CheckBooking(t,e){return this.setHeader(),this.http.post(this.Root_URL+`check/${t}?status=${e}`,null,{headers:this.header,responseType:"text"})}AddSV(t,e){return this.setHeader(),this.http.post(this.Root_URL+"add-sv",{bookingID:t,serviceID:e},{headers:this.header,responseType:"text"})}RemoveSV(t,e){return this.setHeader(),this.http.post(this.Root_URL+"remove-sv",{bookingID:t,serviceID:e},{headers:this.header,responseType:"text"})}get ListCustomerAvailable(){return this.setHeader(),this.http.get(this.Root_URL+"customer",{headers:this.header})}ServicesOfBill(t){return this.setHeader(),this.http.get(this.Root_URL+"service/"+t,{headers:this.header})}}return t.\u0275fac=function(e){return new(e||t)(a.ac(r.a),a.ac(l.d))},t.\u0275prov=a.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=i("+NJU"),d=i("aceb"),g=i("tyNb");function f(t,e){1&t&&(a.Wb(0,"nb-card-header"),a.Hc(1," T\u1ea0O H\xd3A \u0110\u01a0N \u0110\u1eb6T PH\xd2NG "),a.Vb())}function m(t,e){if(1&t&&(a.Wb(0,"nb-card-header"),a.Hc(1),a.Vb()),2&t){const t=a.hc();a.Db(1),a.Jc(" C\u1eacP NH\u1eacT H\xd3A \u0110\u01a0N #",t.booking.id," ")}}function v(t,e){if(1&t&&(a.Wb(0,"nb-option",31),a.Hc(1),a.Vb()),2&t){const t=e.$implicit;a.nc("value",t.id),a.Db(1),a.Kc("",t.name," (ID: ",t.id,")")}}function k(t,e){1&t&&(a.Wb(0,"span",32),a.Hc(1," Room is required "),a.Vb())}function p(t,e){if(1&t&&(a.Wb(0,"nb-option",31),a.Hc(1),a.Vb()),2&t){const t=e.$implicit;a.nc("value",t.id),a.Db(1),a.Kc("",t.name," (ID: ",t.id,")")}}function V(t,e){1&t&&(a.Wb(0,"span",32),a.Hc(1," Customer is required "),a.Vb())}function D(t,e){1&t&&(a.Wb(0,"span"),a.Hc(1,"Check in date is required"),a.Vb())}function W(t,e){if(1&t&&(a.Wb(0,"span",32),a.Fc(1,D,2,0,"span",2),a.Vb()),2&t){const t=a.hc();a.Db(1),a.nc("ngIf",t.form.get("checkin").errors.required)}}function C(t,e){1&t&&(a.Wb(0,"span"),a.Hc(1,"Check out date is required"),a.Vb())}function H(t,e){if(1&t&&(a.Wb(0,"span",32),a.Fc(1,C,2,0,"span",2),a.Vb()),2&t){const t=a.hc();a.Db(1),a.nc("ngIf",t.form.get("checkin").errors.required)}}function I(t,e){1&t&&(a.Wb(0,"span"),a.Hc(1,"Adult is required"),a.Vb())}function y(t,e){if(1&t&&(a.Wb(0,"span"),a.Hc(1),a.Vb()),2&t){const t=a.hc(2);a.Db(1),a.Jc("Adult is min at ",t.form.get("adult").errors.min.min,"")}}function R(t,e){if(1&t&&(a.Wb(0,"span",32),a.Fc(1,I,2,0,"span",2),a.Fc(2,y,2,1,"span",2),a.Vb()),2&t){const t=a.hc();a.Db(1),a.nc("ngIf",t.form.get("adult").errors.required),a.Db(1),a.nc("ngIf",t.form.get("adult").errors.min)}}function w(t,e){if(1&t&&(a.Wb(0,"span"),a.Hc(1),a.Vb()),2&t){const t=a.hc(2);a.Db(1),a.Jc("Child is min at ",t.form.get("child").errors.min.min,"")}}function S(t,e){if(1&t&&(a.Wb(0,"span",32),a.Fc(1,w,2,1,"span",2),a.Vb()),2&t){const t=a.hc();a.Db(1),a.nc("ngIf",t.form.get("child").errors.min)}}let F=(()=>{class t{constructor(t,e,i,c,n,o,s,r,b){this.bookingService=t,this.roomService=e,this.customerService=i,this.dateService=c,this.router=n,this.route=o,this.toast=s,this.dialog=r,this.fb=b,this.isAdd=!0}ngOnInit(){this.loadData(),this.route.params.subscribe(t=>{null!=t.id&&this.bookingService.SelectBooking(t.id).subscribe(t=>{this.booking=t,this.isAdd=!1,this.customerService.getByID(this.booking.customerID).subscribe(t=>{this.customers.push(t)}),this.loadValue()})})}loadData(){this.roomService.ListRooms.subscribe(t=>{this.rooms=t}),this.bookingService.ListCustomerAvailable.subscribe(t=>{this.customers=t}),this.initForm()}initForm(){this.form=this.fb.group({room:["",[o.x.required]],customer:["",[o.x.required]],checkin:[new Date,[o.x.required]],checkout:[this.dateService.addDay(new Date,1),[o.x.required]],adult:[0,[o.x.required,o.x.min(1)]],child:[0,[o.x.min(0)]],voucher:[""]})}loadValue(){this.form.get("room").setValue(this.booking.roomID),this.form.get("customer").setValue(this.booking.customerID),this.form.get("checkin").setValue(new Date(this.booking.checkinDate)),this.form.get("checkout").setValue(new Date(this.booking.checkoutDate)),this.form.get("adult").setValue(this.booking.adult),this.form.get("child").setValue(this.booking.child),this.form.get("voucher").setValue(this.booking.voucherCode)}getFormData(){this.booking.roomID=this.getValue("room"),this.booking.customerID=this.getValue("customer"),this.booking.adult=this.getValue("adult"),this.booking.child=this.getValue("child"),this.booking.checkinDate=new Date(this.getValue("checkin")),this.booking.checkoutDate=new Date(this.getValue("checkout")),this.booking.voucherCode=this.getValue("voucher")}submitForm(){console.log(this.isAdd),this.isAdd?this.addNew():this.update()}get minCheckout(){return this.dateService.addDay(this.getValue("checkin"),1)}get maxCheckout(){return this.dateService.addMonth(this.getValue("checkin"),1)}get minCheckin(){return this.isAdd?new Date:new Date(this.booking.checkinDate)<new Date?new Date(this.booking.checkinDate):new Date}get maxCheckin(){return this.dateService.addMonth(new Date,1)}addNew(){console.log("add"),this.booking={roomID:this.getValue("room"),customerID:this.getValue("customer"),adult:this.getValue("adult"),child:this.getValue("child"),checkinDate:new Date(this.getValue("checkin")),checkoutDate:new Date(this.getValue("checkout")),voucherCode:this.getValue("voucher")},this.bookingService.NewBooking(this.booking).subscribe(t=>{this.toast.show("Create","Create booking successful",{status:"success"}),this.router.navigateByUrl("/home/booking")},t=>{this.dialog.open(u.a,{context:{title:"Error when create booking!!!",content:t.error}})})}update(){this.getFormData(),this.bookingService.EditBooking(this.booking).subscribe(t=>{this.toast.show("Edit","Edit booking successful",{status:"success"}),this.router.navigateByUrl("/home/booking/details/"+this.booking.id)},t=>{this.dialog.open(u.a,{context:{title:"Error when edit booking!!!",content:t.error}})})}getValue(t){return this.form.get(t).value}getConfig(t){return this.form.get(t).invalid&&this.form.get(t).touched}resetFrm(){this.isAdd?this.initForm():this.loadValue()}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(h),a.Qb(s.a),a.Qb(n.a),a.Qb(d.w),a.Qb(g.c),a.Qb(g.a),a.Qb(d.lb),a.Qb(d.C),a.Qb(o.c))},t.\u0275cmp=a.Kb({type:t,selectors:[["ngx-add-booking"]],decls:65,vars:25,consts:[[1,"row"],[1,"col-md-12"],[4,"ngIf"],["novalidate","",3,"formGroup"],[1,"form-group","row"],["for","room",1,"label","col-sm-3","col-form-label"],[1,"col-sm-9"],["fullWidth","","formControlName","room","placeholder","Select Room","shape","semi-round","id","Room",3,"status"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["for","customer",1,"label","col-sm-3","col-form-label"],["fullWidth","","formControlName","customer","placeholder","Select Customer","shape","semi-round","id","Customer",3,"status"],["for","checkin",1,"label","col-sm-3","col-form-label"],["id","checkin",1,"col-sm-9"],["formControlName","checkin","nbInput","","fullWidth","","placeholder","Check in Date",3,"nbDatepicker","status"],[3,"min","max"],["checkin",""],["id","checkout",1,"col-sm-9"],["formControlName","checkout","nbInput","","fullWidth","","placeholder","Check out Date",3,"nbDatepicker","status"],["checkout",""],[1,"col-md-6"],["for","adult",1,"label","col-sm-3","col-form-label"],["type","number","formControlName","adult","nbInput","","fullWidth","","id","adult","placeholder","Adult",3,"status"],["for","child",1,"label","col-sm-3","col-form-label"],["type","number","formControlName","child","nbInput","","fullWidth","","id","child","placeholder","Child",3,"status"],["for","voucher",1,"label","col-sm-3","col-form-label"],["type","text","formControlName","voucher","nbInput","","fullWidth","","id","Voucher","placeholder","Voucher Code",3,"status"],[1,"col-md-4","col-12"],["nbButton","","fullWidth","","hero","","status","primary",3,"disabled","click"],[1,"offset-md-4","col-md-4","col-12"],["type","button","nbButton","","fullWidth","","hero","","status","danger",3,"click"],[3,"value"],[1,"text-danger"]],template:function(t,e){if(1&t&&(a.Wb(0,"div",0),a.Wb(1,"div",1),a.Wb(2,"nb-card"),a.Fc(3,f,2,0,"nb-card-header",2),a.Fc(4,m,2,1,"nb-card-header",2),a.Wb(5,"nb-card-body"),a.Wb(6,"form",3),a.Wb(7,"div",4),a.Wb(8,"label",5),a.Hc(9,"Ph\xf2ng thu\xea: "),a.Vb(),a.Wb(10,"div",6),a.Wb(11,"nb-select",7),a.Fc(12,v,2,3,"nb-option",8),a.Vb(),a.Fc(13,k,2,0,"span",9),a.Vb(),a.Vb(),a.Wb(14,"div",4),a.Wb(15,"label",10),a.Hc(16,"Kh\xe1ch thu\xea: "),a.Vb(),a.Wb(17,"div",6),a.Wb(18,"nb-select",11),a.Fc(19,p,2,3,"nb-option",8),a.Vb(),a.Fc(20,V,2,0,"span",9),a.Vb(),a.Vb(),a.Wb(21,"div",4),a.Wb(22,"label",12),a.Hc(23,"Ng\xe0y check in: "),a.Vb(),a.Wb(24,"div",13),a.Rb(25,"input",14),a.Rb(26,"nb-datepicker",15,16),a.Fc(28,W,2,1,"span",9),a.Vb(),a.Vb(),a.Wb(29,"div",4),a.Wb(30,"label",12),a.Hc(31,"Ng\xe0y check out: "),a.Vb(),a.Wb(32,"div",17),a.Rb(33,"input",18),a.Rb(34,"nb-datepicker",15,19),a.Fc(36,H,2,1,"span",9),a.Vb(),a.Vb(),a.Wb(37,"div",0),a.Wb(38,"div",20),a.Wb(39,"div",4),a.Wb(40,"label",21),a.Hc(41,"Ng\u01b0\u1eddi l\u1edbn: "),a.Vb(),a.Wb(42,"div",6),a.Rb(43,"input",22),a.Fc(44,R,3,2,"span",9),a.Vb(),a.Vb(),a.Vb(),a.Wb(45,"div",20),a.Wb(46,"div",4),a.Wb(47,"label",23),a.Hc(48,"Tr\u1ebb em: "),a.Vb(),a.Wb(49,"div",6),a.Rb(50,"input",24),a.Fc(51,S,2,1,"span",9),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(52,"div",4),a.Wb(53,"label",25),a.Hc(54,"M\xe3 \u01b0u \u0111\xe3i: "),a.Vb(),a.Wb(55,"div",6),a.Rb(56,"input",26),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(57,"nb-card-footer"),a.Wb(58,"div",0),a.Wb(59,"div",27),a.Wb(60,"button",28),a.dc("click",function(){return e.submitForm()}),a.Hc(61,"X\xc1C NH\u1eacN"),a.Vb(),a.Vb(),a.Wb(62,"div",29),a.Wb(63,"button",30),a.dc("click",function(){return e.resetFrm()}),a.Hc(64,"NH\u1eacP L\u1ea0I"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb()),2&t){const t=a.vc(27),i=a.vc(35);a.Db(3),a.nc("ngIf",e.isAdd),a.Db(1),a.nc("ngIf",!e.isAdd),a.Db(2),a.nc("formGroup",e.form),a.Db(5),a.nc("status",e.getConfig("room")?"danger":"basic"),a.Db(1),a.nc("ngForOf",e.rooms),a.Db(1),a.nc("ngIf",e.getConfig("room")),a.Db(5),a.nc("status",e.getConfig("customer")?"danger":"basic"),a.Db(1),a.nc("ngForOf",e.customers),a.Db(1),a.nc("ngIf",e.getConfig("customer")),a.Db(5),a.nc("nbDatepicker",t)("status",e.getConfig("checkin")?"danger":"basic"),a.Db(1),a.nc("min",e.minCheckin)("max",e.maxCheckin),a.Db(2),a.nc("ngIf",e.getConfig("checkin")),a.Db(5),a.nc("nbDatepicker",i)("status",e.getConfig("checkout")?"danger":"basic"),a.Db(1),a.nc("min",e.minCheckout)("max",e.maxCheckout),a.Db(2),a.nc("ngIf",e.getConfig("checkin")),a.Db(7),a.nc("status",e.getConfig("adult")?"danger":"basic"),a.Db(1),a.nc("ngIf",e.getConfig("adult")),a.Db(6),a.nc("status",e.getConfig("child")?"danger":"basic"),a.Db(1),a.nc("ngIf",e.getConfig("child")),a.Db(5),a.nc("status",e.getConfig("voucher")?"danger":"basic"),a.Db(4),a.nc("disabled",e.form.invalid)}},directives:[d.o,c.n,d.n,o.z,o.o,o.g,d.cb,o.n,o.f,c.m,o.b,d.G,d.y,d.x,o.s,d.p,d.l,d.q,d.U],encapsulation:2}),t})();var x=i("5Ol4");function B(t,e){if(1&t){const t=a.Xb();a.Wb(0,"nb-list-item"),a.Wb(1,"nb-list-item"),a.Wb(2,"div",1),a.Wb(3,"div",2),a.Hc(4),a.Vb(),a.Wb(5,"div",2),a.Hc(6),a.Vb(),a.Wb(7,"div",3),a.Wb(8,"button",4),a.dc("click",function(){a.xc(t);const i=e.$implicit;return a.hc().AddService(i.id)}),a.Rb(9,"nb-icon",5),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb()}if(2&t){const t=e.$implicit;a.Db(4),a.Jc(" D\u1ecbch v\u1ee5: ",t.name," "),a.Db(2),a.Jc(" Gi\xe1: ",t.price," ")}}function N(t,e){if(1&t){const t=a.Xb();a.Wb(0,"nb-list-item"),a.Wb(1,"nb-list-item"),a.Wb(2,"div",1),a.Wb(3,"div",2),a.Hc(4),a.Vb(),a.Wb(5,"div",2),a.Hc(6),a.Vb(),a.Wb(7,"div",3),a.Wb(8,"button",6),a.dc("click",function(){a.xc(t);const i=e.$implicit;return a.hc().RemoveService(i.id)}),a.Rb(9,"nb-icon",7),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Vb()}if(2&t){const t=e.$implicit;a.Db(4),a.Jc(" D\u1ecbch v\u1ee5: ",t.name," "),a.Db(2),a.Jc(" Gi\xe1: ",t.price," ")}}let T=(()=>{class t{constructor(t,e,i,c){this.serviceService=t,this.bookingService=e,this.ref=i,this.toast=c,this.addService=[],this.removeService=[]}ngOnInit(){this.loadData()}loadData(){this.bookingService.ServicesOfBill(this.id).subscribe(t=>{this.billService=t,this.serviceService.List.subscribe(t=>{this.addService=[],this.removeService=[],t.forEach(t=>{this.billService.includes(t.id)?this.removeService.push(t):this.addService.push(t)})})})}AddService(t){this.bookingService.AddSV(this.id,t).subscribe(e=>{this.toast.show(`Add service ${t} success`,"ADD",{status:"success"}),this.loadData()},e=>{this.toast.show(`Add service ${t} failed`,"ADD",{status:"danger"})})}RemoveService(t){this.bookingService.RemoveSV(this.id,t).subscribe(e=>{this.toast.show(`Remove service ${t} success`,"REMOVE",{status:"success"}),this.loadData()},e=>{this.toast.show(`Remove service ${t} failed`,"REMOVE",{status:"danger"})})}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(x.a),a.Qb(h),a.Qb(d.B),a.Qb(d.lb))},t.\u0275cmp=a.Kb({type:t,selectors:[["ngx-call-service"]],inputs:{id:"id"},decls:7,vars:3,consts:[[4,"ngFor","ngForOf"],[1,"row"],[1,"col"],[1,"col-2"],["nbButton","","status","success",3,"click"],["icon","plus-circle-outline"],["nbButton","","status","danger",3,"click"],["icon","minus-circle-outline"]],template:function(t,e){1&t&&(a.Wb(0,"nb-card"),a.Wb(1,"nb-card-header"),a.Hc(2),a.Vb(),a.Wb(3,"nb-card-body"),a.Wb(4,"nb-list"),a.Fc(5,B,10,2,"nb-list-item",0),a.Fc(6,N,10,2,"nb-list-item",0),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Db(2),a.Jc("D\u1ecaCH V\u1ee4 CHO H\xd3A \u0110\u01a0N #",e.id,""),a.Db(3),a.nc("ngForOf",e.addService),a.Db(1),a.nc("ngForOf",e.removeService))},directives:[d.o,d.q,d.n,d.N,c.m,d.O,d.l,d.D],encapsulation:2}),t})();var A=i("8TLQ");function O(t,e){if(1&t){const t=a.Xb();a.Wb(0,"nb-action",20),a.dc("click",function(){return a.xc(t),a.hc(2).CheckBooking("confirm")}),a.Vb()}}function E(t,e){if(1&t){const t=a.Xb();a.Wb(0,"nb-action",21),a.dc("click",function(){return a.xc(t),a.hc(2).CheckBooking("payment")}),a.Vb()}}function M(t,e){if(1&t){const t=a.Xb();a.Wb(0,"nb-action",22),a.dc("click",function(){return a.xc(t),a.hc(2).CheckBooking("checkin")}),a.Hc(1,"Check in"),a.Vb()}}function Q(t,e){if(1&t){const t=a.Xb();a.Wb(0,"nb-action",23),a.dc("click",function(){return a.xc(t),a.hc(2).CheckBooking("checkout")}),a.Hc(1,"Check out"),a.Vb()}}function X(t,e){if(1&t&&(a.Wb(0,"nb-list-item"),a.Wb(1,"div",27),a.Hc(2),a.Vb(),a.Wb(3,"div",27),a.Hc(4),a.Vb(),a.Vb()),2&t){const t=e.$implicit;a.Db(2),a.Jc(" T\xean d\u1ecbch v\u1ee5: ",t.service.name," "),a.Db(2),a.Jc(" Gi\xe1 d\u1ecbch v\u1ee5: ",t.service.price," $ ")}}function L(t,e){if(1&t&&(a.Wb(0,"nb-list-item",8),a.Wb(1,"div",24),a.Rb(2,"i",25),a.Hc(3," D\u1ecbch v\u1ee5 s\u1eed d\u1ee5ng: "),a.Vb(),a.Wb(4,"nb-list",24),a.Fc(5,X,5,2,"nb-list-item",26),a.Vb(),a.Vb()),2&t){const t=a.hc(2);a.Db(5),a.nc("ngForOf",t.bill.services)}}function U(t,e){if(1&t&&(a.Wb(0,"nb-list-item",8),a.Wb(1,"div",28),a.Rb(2,"i",29),a.Hc(3),a.Vb(),a.Wb(4,"div",28),a.Hc(5),a.Vb(),a.Vb()),2&t){const t=a.hc(2);a.Db(3),a.Jc(" M\xe3 voucher: ",t.bill.voucherCode," "),a.Db(2),a.Jc("Discount : ",t.bill.voucher.discount," %")}}function q(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",30),a.Wb(1,"button",34),a.dc("click",function(){return a.xc(t),a.hc(3).RemoveBooking()}),a.Rb(2,"i",35),a.Hc(3,"\u2003X\xf3a h\xf3a \u0111\u01a1n "),a.Vb(),a.Vb()}}function J(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",30),a.Wb(1,"button",34),a.dc("click",function(){return a.xc(t),a.hc(3).CheckBooking("cancel")}),a.Rb(2,"i",35),a.Hc(3,"\u2003H\u1ee7y h\xf3a \u0111\u01a1n "),a.Vb(),a.Vb()}}function $(t,e){if(1&t){const t=a.Xb();a.Wb(0,"div",8),a.Wb(1,"div",30),a.Wb(2,"button",31),a.dc("click",function(){return a.xc(t),a.hc(2).EditBooking()}),a.Rb(3,"i",32),a.Hc(4,"\u2003C\u1eadp nh\u1eadt th\xf4ng tin "),a.Vb(),a.Vb(),a.Wb(5,"div",30),a.Wb(6,"button",31),a.dc("click",function(){return a.xc(t),a.hc(2).CallService()}),a.Rb(7,"i",25),a.Hc(8,"\u2003D\u1ecbch v\u1ee5 s\u1eed d\u1ee5ng"),a.Vb(),a.Vb(),a.Fc(9,q,4,0,"div",33),a.Fc(10,J,4,0,"div",33),a.Vb()}if(2&t){const t=a.hc(2);a.Db(9),a.nc("ngIf",null==t.bill.status),a.Db(1),a.nc("ngIf",null!=t.bill.status)}}function P(t,e){if(1&t&&(a.Wb(0,"nb-card"),a.Wb(1,"nb-card-header"),a.Wb(2,"nb-actions",2),a.Wb(3,"nb-action"),a.Hc(4),a.Vb(),a.Fc(5,O,1,0,"nb-action",3),a.Fc(6,E,1,0,"nb-action",4),a.Fc(7,M,2,0,"nb-action",5),a.Fc(8,Q,2,0,"nb-action",6),a.Rb(9,"nb-action",7),a.Vb(),a.Vb(),a.Wb(10,"nb-card-body"),a.Wb(11,"nb-list"),a.Wb(12,"nb-list-item",8),a.Wb(13,"div",9),a.Rb(14,"i",10),a.Hc(15," M\xe3 ph\xf2ng thu\xea: "),a.Vb(),a.Wb(16,"div",9),a.Hc(17),a.Vb(),a.Wb(18,"div",9),a.Hc(19," T\xean ph\xf2ng: "),a.Vb(),a.Wb(20,"div",9),a.Hc(21),a.Vb(),a.Vb(),a.Wb(22,"nb-list-item",8),a.Wb(23,"div",9),a.Rb(24,"i",11),a.Hc(25," M\xe3 kh\xe1ch thu\xea: "),a.Vb(),a.Wb(26,"div",9),a.Hc(27),a.Vb(),a.Wb(28,"div",9),a.Hc(29," T\xean kh\xe1ch thu\xea: "),a.Vb(),a.Wb(30,"div",9),a.Hc(31),a.Vb(),a.Vb(),a.Wb(32,"nb-list-item",8),a.Wb(33,"div",9),a.Rb(34,"i",12),a.Hc(35," Ng\u01b0\u1eddi l\u1edbn: "),a.Vb(),a.Wb(36,"div",9),a.Hc(37),a.Vb(),a.Wb(38,"div",9),a.Rb(39,"i",13),a.Hc(40," Tr\u1ebb em: "),a.Vb(),a.Wb(41,"div",9),a.Hc(42),a.Vb(),a.Vb(),a.Wb(43,"nb-list-item",8),a.Wb(44,"div",9),a.Rb(45,"i",14),a.Hc(46," Ng\xe0y check in: "),a.Vb(),a.Wb(47,"div",9),a.Hc(48),a.ic(49,"date"),a.Vb(),a.Wb(50,"div",9),a.Rb(51,"i",15),a.Hc(52," Ng\xe0y check out: "),a.Vb(),a.Wb(53,"div",9),a.Hc(54),a.ic(55,"date"),a.Vb(),a.Vb(),a.Fc(56,L,6,1,"nb-list-item",16),a.Fc(57,U,6,2,"nb-list-item",16),a.Wb(58,"nb-list-item",8),a.Wb(59,"div",9),a.Rb(60,"i",17),a.Hc(61," T\u1ed5ng h\xf3a \u0111\u01a1n: "),a.Vb(),a.Wb(62,"div",18),a.Hc(63),a.Vb(),a.Vb(),a.Wb(64,"nb-list-item",8),a.Wb(65,"div",9),a.Rb(66,"i",19),a.Hc(67," Tr\u1ea1ng th\xe1i h\xf3a \u0111\u01a1n: "),a.Vb(),a.Wb(68,"div",18),a.Hc(69),a.ic(70,"status"),a.Vb(),a.Vb(),a.Vb(),a.Vb(),a.Wb(71,"nb-card-footer"),a.Fc(72,$,11,2,"div",16),a.Vb(),a.Vb()),2&t){const t=a.hc();a.Db(4),a.Jc(" Th\xf4ng tin h\xf3a \u0111\u01a1n: #",t.bill.id," "),a.Db(1),a.nc("ngIf",null==t.bill.status),a.Db(1),a.nc("ngIf","checkout"==t.bill.status),a.Db(1),a.nc("ngIf",t.isCheckin),a.Db(1),a.nc("ngIf",t.isCheckout),a.Db(1),a.nc("icon",t.disabledIconConfig),a.Db(8),a.Ic(t.bill.room.id),a.Db(4),a.Ic(t.bill.room.name),a.Db(6),a.Ic(t.bill.customer.id),a.Db(4),a.Ic(t.bill.customer.name),a.Db(6),a.Ic(t.bill.adult),a.Db(5),a.Ic(t.bill.child),a.Db(6),a.Ic(a.kc(49,19,t.bill.checkinDate,"dd/MM/yyyy")),a.Db(6),a.Ic(a.kc(55,22,t.bill.checkoutDate,"dd/MM/yyyy")),a.Db(2),a.nc("ngIf",t.bill.services.length>0),a.Db(1),a.nc("ngIf",null!=t.bill.voucher),a.Db(6),a.Jc("",t.getPrice()," $"),a.Db(6),a.Ic(a.jc(70,25,t.bill.status)),a.Db(3),a.nc("ngIf",t.CanEdit())}}function _(t,e){1&t&&(a.Wb(0,"nb-card",36),a.Wb(1,"nb-card-header"),a.Hc(2,"Booking does not exist"),a.Vb(),a.Vb())}let K=(()=>{class t{constructor(t,e,i,c,n){this.bookingService=t,this.dialog=e,this.router=i,this.route=c,this.toastr=n}ngOnInit(){this.loadData()}loadData(){this.route.params.subscribe(t=>{null!=t.id&&this.bookingService.SelectBooking(t.id).subscribe(t=>{this.bill=t})})}getPrice(){let t=new Date(this.bill.checkinDate).getTime(),e=new Date(this.bill.checkoutDate).getTime(),i=this.bill.room.price*Math.round((e-t)/864e5);return this.bill.services.length>0&&this.bill.services.forEach(t=>{i+=t.service.price}),null!=this.bill.voucherCode&&(i*=(100-this.bill.voucher.discount)/100),Math.round(i)}CanEdit(){return new Date(this.bill.checkoutDate)>=new Date&&"cancel"!=this.bill.status}EditBooking(){this.router.navigateByUrl("/home/booking/edit/"+this.bill.id)}RemoveBooking(){this.bookingService.DeleteBooking(this.bill.id).subscribe(t=>{this.toastr.show(`Remove bill #${this.bill.id} success`,"Remove",{status:"success"}),this.router.navigateByUrl("/home/booking")},t=>{this.dialog.open(u.a,{context:{title:"ERROR REMOVE",content:t.error}})})}CheckBooking(t){this.bookingService.CheckBooking(this.bill.id,t).subscribe(t=>{this.toastr.show("Confirm success","Confirm",{status:"success"}),this.loadData()},t=>{this.toastr.show("Confirm failed","Confirm",{status:"danger"})})}CallService(){this.dialog.open(T,{context:{id:this.bill.id}}).onClose.subscribe(t=>{this.loadData()})}get isCheckin(){return"confirm"==this.bill.status&&new Date(this.bill.checkinDate)<=new Date}get isCheckout(){return"checkin"==this.bill.status&&new Date(this.bill.checkoutDate)<=new Date}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(h),a.Qb(d.C),a.Qb(g.c),a.Qb(g.a),a.Qb(d.lb))},t.\u0275cmp=a.Kb({type:t,selectors:[["ngx-details-booking"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noBill",""],["size","small"],["nbTooltip","X\xe1c nh\u1eadn h\xf3a \u0111\u01a1n","icon","checkmark-circle-2-outline",3,"click",4,"ngIf"],["nbTooltip","X\xe1c nh\u1eadn thanh to\xe1n","icon","credit-card-outline",3,"click",4,"ngIf"],["nbTooltip","X\xe1c nh\u1eadn Check in","icon","calendar-outline",3,"click",4,"ngIf"],["nbTooltip","X\xe1c nh\u1eadn Checkout","icon","calendar-outline",3,"click",4,"ngIf"],["disabled","",3,"icon"],[1,"row"],[1,"col-6","col-md-3"],[1,"fas","fa-home"],[1,"fas","fa-user-circle"],[1,"fas","fa-male"],[1,"fas","fa-child"],[1,"fas","fa-calendar"],[1,"fas","fa-calendar-checck"],["class","row",4,"ngIf"],[1,"fas","fa-money-bill-wave"],[1,"col-6","col-md-9"],[1,"fas","fa-info-circle"],["nbTooltip","X\xe1c nh\u1eadn h\xf3a \u0111\u01a1n","icon","checkmark-circle-2-outline",3,"click"],["nbTooltip","X\xe1c nh\u1eadn thanh to\xe1n","icon","credit-card-outline",3,"click"],["nbTooltip","X\xe1c nh\u1eadn Check in","icon","calendar-outline",3,"click"],["nbTooltip","X\xe1c nh\u1eadn Checkout","icon","calendar-outline",3,"click"],[1,"col-12"],[1,"fas","fa-concierge-bell"],[4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"col-6"],[1,"fas","fa-gift"],[1,"col-md-4","col-12"],["hero","","fullWidth","","nbButton","","shape","semi-round","status","info",3,"click"],[1,"fas","fa-edit"],["class","col-md-4 col-12",4,"ngIf"],["hero","","fullWidth","","nbButton","","shape","semi-round","status","danger",3,"click"],[1,"fas","fa-minus-circle"],["status","danger"]],template:function(t,e){if(1&t&&(a.Fc(0,P,73,27,"nb-card",0),a.Fc(1,_,3,0,"ng-template",null,1,a.Gc)),2&t){const t=a.vc(2);a.nc("ngIf",null!=e.bill)("ngIfElse",t)}},directives:[c.n,d.o,d.q,d.h,d.g,d.n,d.N,d.O,d.p,d.mb,c.m,d.l],pipes:[c.e,A.a],encapsulation:2}),t})();var G=i("RS3s");let z=(()=>{class t{constructor(t,e,i){this.bookingService=t,this.router=e,this.route=i,this.settings={actions:{add:!1,edit:!1,delete:!1},columns:{id:{title:"#",type:"number",filter:!0},room:{title:"Room",type:"string",filter:!0,valuePrepareFunction:t=>t.id+" : "+t.name},customer:{title:"Customer",type:"string",filter:!0,valuePrepareFunction:t=>t.id+" : "+t.name},checkinDate:{title:"Check In",type:"date",valuePrepareFunction:t=>{var e=new Date(t);return new c.e("en-EN").transform(e,"dd/MM/yyyy")}},checkoutDate:{title:"CheckOut",type:"date",valuePrepareFunction:t=>{var e=new Date(t);return new c.e("en-EN").transform(e,"dd/MM/yyyy")}},status:{title:"Status",type:"string",valuePrepareFunction:t=>(new A.a).transform(t),filter:{type:"list",config:{selectText:"Select status",list:[{value:"wait",title:"Ch\u1edd x\xe1c nh\u1eadn"},{value:"confirm",title:"\u0110\xe3 x\xe1c nh\u1eadn"},{value:"payment",title:"\u0110\xe3 thanh to\xe1n"},{value:"cancel",title:"\u0110\xe3 h\u1ee7y"},{value:"checkin",title:"Check In"},{value:"checkout",title:"Checkout"}]}},filterFunction:(t,e)=>""===e||e===t||"wait"===e&&""===t}}},this.source=new G.a}ngOnInit(){this.bookingService.ListBooking.subscribe(t=>{this.source.load(t)}),this.route.queryParams.subscribe(t=>{null!=t.search&&this.onSearch(t.search)})}SelectBill(t){this.router.navigateByUrl("/home/booking/details/"+t.data.id)}onSearch(t=""){t.trim(),this.source.setFilter([{field:"id",search:t}],!1)}}return t.\u0275fac=function(e){return new(e||t)(a.Qb(h),a.Qb(g.c),a.Qb(g.a))},t.\u0275cmp=a.Kb({type:t,selectors:[["ngx-list-booking"]],decls:5,vars:2,consts:[["accent","primary"],[3,"settings","source","userRowSelect"]],template:function(t,e){1&t&&(a.Wb(0,"nb-card",0),a.Wb(1,"nb-card-header"),a.Hc(2," DANH S\xc1CH H\xd3A \u0110\u01a0N "),a.Vb(),a.Wb(3,"nb-card-body"),a.Wb(4,"ng2-smart-table",1),a.dc("userRowSelect",function(t){return e.SelectBill(t)}),a.Vb(),a.Vb(),a.Vb()),2&t&&(a.Db(4),a.nc("settings",e.settings)("source",e.source))},directives:[d.o,d.q,d.n,G.b],encapsulation:2}),t})();const j=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Kb({type:t,selectors:[["ngx-booking"]],decls:3,vars:0,template:function(t,e){1&t&&(a.Wb(0,"nb-layout"),a.Wb(1,"nb-layout-column"),a.Rb(2,"router-outlet"),a.Vb(),a.Vb())},directives:[d.J,d.I,g.h],encapsulation:2}),t})(),children:[{path:"",component:z},{path:"details/:id",component:K},{path:"new",component:F},{path:"edit/:id",component:F}]}];let Y=(()=>{class t{}return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(e){return new(e||t)},imports:[[g.g.forChild(j)],g.g]}),t})();var Z=i("vTDv"),tt=i("CvZm");let et=(()=>{class t{}return t.\u0275mod=a.Ob({type:t}),t.\u0275inj=a.Nb({factory:function(e){return new(e||t)},imports:[[c.c,Y,d.r,d.F,G.c,d.H,d.m,d.i,d.pb,d.db,d.Y,d.z,tt.a,d.k,o.h,o.u,d.P,Z.a.forRoot(),d.M,d.fb.forRoot(),d.nb]]}),t})()}}]);